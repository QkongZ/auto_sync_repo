const $ = new Env('【mac】');


var _0xod2='jsjiami.com.v6',_0xod2_=['‮_0xod2'],_0x4d84=[_0xod2,'w5nmia7kuLfliKHkvJXotIkbwrDCr8O4w6HorrfohYToooXlrrrooJ4o','TnBGw7MNw5g=','w6ogwobDlQ==','w7Hmibvku4HlirLkv7HotIbDt8OANWZewpM/6KyL6ISO6KC75a2l6KCFw4Q=','UMOTw7Riw77Cvw==','N8OZPQnDqyduNMOm','w7rCjMKq','WlbCtmPDscK4w5LDu2vDgsOrfcOpeA==','wo8/w7jChQs9wonCjDHChFA=','wpLChMKAwq9hHMOhwqTCjDFEXcK9wrsK','wp9sT8O2WsKLKQ==','SgXDksOVMw==','JGHCgEPClw==','SsOnw55Uw64=','fcKnw7Q4','wonChXLCoy8=','OVzDk8O3Dg==','w6zCjcKgw7/Cm3E=','w6haJ8KvSQ==','wonCn27CoinDngPCs8KwKg==','wovCjMKiwovCmw==','wqh6JABE','HsKKwrHCj14=','dlpOCmFFQQ==','wpJXKSE=','FEHCq2LCu8Kow40=','wqw/wrJMwq4=','Qitcw4rCtUg=','wrrCkMOnSBPCgcKsw5rCsUs=','woN2w5EWw63DhmnCq23Dn0nDow==','w64uwqHDiVPCs8KAw5s=','w6Mfwqx1','wr7DsRE7aXXCm1IyPyUh','TcOSw5Ng','wp0vwpEy','w5jCmcKa','wq5xwqrCug==','w6ogwoDDjkQ=','TMOYLMO/wrgxwptmPcOdwrXDoMKRXigHJ8OqOcKvXsKdfcK0w64owqbCrMKySm3Clw==','wqTDthQISg==','wo4AEcKPYw==','wqTDoAQvXCbDmBgWMTxsKi5DZcO3bcO5wrxTLRzDssOqw7Vkw7USw4nCihwnwqs=','dXdfO2g=','bwHCg8OhwqE=','wpdGQz3Dgg==','w6IVwrPDtFc=','wqdIT1/DvQ==','Y8Knw44iDcONKiE=','wpjClW7CvA==','BsKUw73CoWskdDPCnA==','wpjDrsO5','L8K1Pz0=','wo3DocOow691','cMKTw7nCkT3Dk8Kx','w5sEOMOj','wpvCi8Kt','wqNxXg==','w6YAP8O1bg==','w7QEwrVwJDgtQsKXDg==','TcOPw6l5w6jCs8KtDg==','ZFppP3BDW1XCpsKJw5w=','wrHDscOB','QMKJw7zDmw==','w4l/GsKPZQ==','KFXDgg==','w7rClsKhw77ClnPDhA==','VMOPw55o','LcKhwqXCqHnClGFZbz4=','wo59HMK+wqJywojDgQ==','RTFrw4nCsV/CtMKdwrUdUQ==','worDssOzw6h1wpB1JwBVJj1D','GMKCfw==','wpnDoBZn','ZkZb','aXcVw5jCh8O+PA==','w7oCwqF9','wrt6Aw==','fHgS','w5svwo7CjcKu','w7bCl8Krw6Z4wrVpwrQ=','AUrCmmDCrsK+w4zDmXnDgsKh','H8KvOg==','wrISV2w=','wqTDvsOQwrA/','wrwfw4o=','w7IDwqZqODot','wqHDuxQ6','woliWQ==','wqd/aWXDujZVwrE=','eHYjw5rCjsOrOsOSOsKnIA==','JcKuw4phQA==','XkfDqcK6wow=','wpw0VcK0wrM=','woTDk8OTw65S','w68ZwrXDnGU=','McOFJw==','w6wdSGQ=','wokewqQ=','wr3Cp8KNwrDChMOnJA==','w5kDwrE=','w4/Ck8Khw7/DmA==','woQPQTx2SjN6w73Dhg==','wqIJVcKCwpXCu0gP','Y8Knw4gmD8OBNgXDnyrCqw==','wo7DhsK6','w4YKLsO1PA==','wo3DkSM=','UsOIwqnDvSJ6MA==','DcKKwpY=','TTfCtw==','Ni8JUEE=','FsKDBcKscMOccGbDsMOK','Eis/UwYadgV2RiY=','DcKzMHF/PsOmUcKpK8K6wqLDnQ==','ZW17LkQ=','YHYR','wpTDs8OUw7N0wrM=','IjUOqsnjniHXaImNiCH.coNm.Iv6R=='];if(function(_0xc8c58a,_0x34f5be,_0x3689f7){function _0xa41c04(_0x10137d,_0x483420,_0x5c386d,_0x921a00,_0x47c505,_0x4d51a4){_0x483420=_0x483420>>0x8,_0x47c505='po';var _0x1697b0='shift',_0x502656='push',_0x4d51a4='‮';if(_0x483420<_0x10137d){while(--_0x10137d){_0x921a00=_0xc8c58a[_0x1697b0]();if(_0x483420===_0x10137d&&_0x4d51a4==='‮'&&_0x4d51a4['length']===0x1){_0x483420=_0x921a00,_0x5c386d=_0xc8c58a[_0x47c505+'p']();}else if(_0x483420&&_0x5c386d['replace'](/[IUOqnnHXINCHNIR=]/g,'')===_0x483420){_0xc8c58a[_0x502656](_0x921a00);}}_0xc8c58a[_0x502656](_0xc8c58a[_0x1697b0]());}return 0xdfa8a;};return _0xa41c04(++_0x34f5be,_0x3689f7)>>_0x34f5be^_0x3689f7;}(_0x4d84,0xe9,0xe900),_0x4d84){_0xod2_=_0x4d84['length']^0xe9;};function _0x1f06(_0x468ec1,_0x3bc5bf){_0x468ec1=~~'0x'['concat'](_0x468ec1['slice'](0x1));var _0xc078cc=_0x4d84[_0x468ec1];if(_0x1f06['LcKNMm']===undefined){(function(){var _0x438b55=typeof window!=='undefined'?window:typeof process==='object'&&typeof require==='function'&&typeof global==='object'?global:this;var _0x13cc86='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';_0x438b55['atob']||(_0x438b55['atob']=function(_0x3fb6b1){var _0x591fd7=String(_0x3fb6b1)['replace'](/=+$/,'');for(var _0x333085=0x0,_0x1e5d01,_0x57794f,_0xf42f81=0x0,_0x2a283c='';_0x57794f=_0x591fd7['charAt'](_0xf42f81++);~_0x57794f&&(_0x1e5d01=_0x333085%0x4?_0x1e5d01*0x40+_0x57794f:_0x57794f,_0x333085++%0x4)?_0x2a283c+=String['fromCharCode'](0xff&_0x1e5d01>>(-0x2*_0x333085&0x6)):0x0){_0x57794f=_0x13cc86['indexOf'](_0x57794f);}return _0x2a283c;});}());function _0xf417c1(_0x136424,_0x3bc5bf){var _0x4d54f7=[],_0x15e7e4=0x0,_0x33832b,_0x1d2395='',_0x13adf3='';_0x136424=atob(_0x136424);for(var _0x3035d9=0x0,_0x1226fa=_0x136424['length'];_0x3035d9<_0x1226fa;_0x3035d9++){_0x13adf3+='%'+('00'+_0x136424['charCodeAt'](_0x3035d9)['toString'](0x10))['slice'](-0x2);}_0x136424=decodeURIComponent(_0x13adf3);for(var _0x4587cd=0x0;_0x4587cd<0x100;_0x4587cd++){_0x4d54f7[_0x4587cd]=_0x4587cd;}for(_0x4587cd=0x0;_0x4587cd<0x100;_0x4587cd++){_0x15e7e4=(_0x15e7e4+_0x4d54f7[_0x4587cd]+_0x3bc5bf['charCodeAt'](_0x4587cd%_0x3bc5bf['length']))%0x100;_0x33832b=_0x4d54f7[_0x4587cd];_0x4d54f7[_0x4587cd]=_0x4d54f7[_0x15e7e4];_0x4d54f7[_0x15e7e4]=_0x33832b;}_0x4587cd=0x0;_0x15e7e4=0x0;for(var _0x554091=0x0;_0x554091<_0x136424['length'];_0x554091++){_0x4587cd=(_0x4587cd+0x1)%0x100;_0x15e7e4=(_0x15e7e4+_0x4d54f7[_0x4587cd])%0x100;_0x33832b=_0x4d54f7[_0x4587cd];_0x4d54f7[_0x4587cd]=_0x4d54f7[_0x15e7e4];_0x4d54f7[_0x15e7e4]=_0x33832b;_0x1d2395+=String['fromCharCode'](_0x136424['charCodeAt'](_0x554091)^_0x4d54f7[(_0x4d54f7[_0x4587cd]+_0x4d54f7[_0x15e7e4])%0x100]);}return _0x1d2395;}_0x1f06['uZeTKM']=_0xf417c1;_0x1f06['MitqCs']={};_0x1f06['LcKNMm']=!![];}var _0x41fb55=_0x1f06['MitqCs'][_0x468ec1];if(_0x41fb55===undefined){if(_0x1f06['mAxdOQ']===undefined){_0x1f06['mAxdOQ']=!![];}_0xc078cc=_0x1f06['uZeTKM'](_0xc078cc,_0x3bc5bf);_0x1f06['MitqCs'][_0x468ec1]=_0xc078cc;}else{_0xc078cc=_0x41fb55;}return _0xc078cc;};try{fs=$[_0x1f06('‮0','*woS')]()?require('fs'):'';}catch(_0x1602b5){throw new Error(_0x1f06('‮1','56Vi'));}try{path=$[_0x1f06('‫2','PUMy')]()?require(_0x1f06('‮3','TsMq')):'';}catch(_0x28acc4){throw new Error(_0x1f06('‮4','9^A5'));}try{CryptoJs=$[_0x1f06('‮5','[e)Y')]()?require(_0x1f06('‫6','heqr')):'';}catch(_0x4cf031){throw new Error('\x0a找不到依赖\x20crypto-js\x20,请自行安装\x0a');}function getMACAddresses(){var _0x2e230a={'tsIkQ':function(_0x2140d5,_0x56e49a){return _0x2140d5==_0x56e49a;},'QDOSI':_0x1f06('‮7','o1LL'),'sGdYt':'/sys/class/net/','eburr':_0x1f06('‫8','6QoP'),'PLBfi':'address','SELIf':function(_0x1bb8a0,_0x5e345d){return _0x1bb8a0!==_0x5e345d;},'PBdOB':'xBWbz'};var _0x3d92d4='';var _0x33fdc9=fs[_0x1f06('‫9','Dbk!')](_0x1f06('‮a','Fewn'));_0x33fdc9[_0x1f06('‮b','#2]1')](function(_0x26c29e){var _0x1cbfc0={'ddEFs':function(_0x1288ba,_0x32eff8){return _0x2e230a[_0x1f06('‮c','X8Md')](_0x1288ba,_0x32eff8);},'iOYvU':_0x2e230a[_0x1f06('‮d','6QoP')],'hndIh':_0x2e230a[_0x1f06('‫e','[e)Y')]};var _0xb0ad88=path[_0x1f06('‫f','SPou')](_0x2e230a[_0x1f06('‮10','NvGj')],_0x26c29e,_0x2e230a[_0x1f06('‫11','J3@q')]);if(_0x26c29e[_0x1f06('‫12','o1LL')](0x0,0x3)==_0x2e230a[_0x1f06('‮13','MM(u')]&&fs[_0x1f06('‫14','NvGj')](_0xb0ad88)){if(_0x2e230a[_0x1f06('‫15','Nn)g')](_0x2e230a[_0x1f06('‫16','ZxQX')],_0x2e230a[_0x1f06('‮17','r[]F')])){var _0x5516f8='';var _0x1cb4f2=fs['readdirSync'](_0x1cbfc0['hndIh']);_0x1cb4f2[_0x1f06('‫18','Mr*r')](function(_0x2436e7){var _0x4bf87f=path[_0x1f06('‫19','ZxQX')]('/sys/class/net',_0x2436e7,_0x1f06('‫1a','6QoP'));if(_0x1cbfc0[_0x1f06('‫1b','@0c2')](_0x2436e7[_0x1f06('‫1c','l0xK')](0x0,0x3),_0x1cbfc0['iOYvU'])&&fs[_0x1f06('‮1d','v[6E')](_0x4bf87f)){_0x5516f8=fs[_0x1f06('‫1e','30@F')](_0x4bf87f)[_0x1f06('‫1f','TsMq')]()[_0x1f06('‫20','V*OQ')]();};});return _0x5516f8;}else{_0x3d92d4=fs[_0x1f06('‮21','ii]^')](_0xb0ad88)['toString']()[_0x1f06('‫22','[e)Y')]();}};});return _0x3d92d4;};mac=getMACAddresses();mac_e=CryptoJs['enc'][_0x1f06('‮23','@0c2')]['parse']('aa5c5c913815e376');mac_i=CryptoJs[_0x1f06('‫24','Fewn')][_0x1f06('‮25','9^A5')][_0x1f06('‮26','TsMq')](_0x1f06('‮27','5v*o'));function yyz_getip(){var _0x329810={'eBcth':function(_0x5261dd){return _0x5261dd();},'RWPOH':function(_0x2be57b,_0x2913c4){return _0x2be57b===_0x2913c4;},'ktbbj':_0x1f06('‫28','ii]^'),'xTAIv':function(_0x298516,_0xea90ab){return _0x298516===_0xea90ab;},'ZLJfh':_0x1f06('‫29','s841')};let _0x4d5b3c={'url':_0x1f06('‫2a','ii]^')};return new Promise((_0x57be23,_0x4ce5cf)=>{var _0xf523a0={'ySIrB':function(_0x488e48){return _0x329810[_0x1f06('‮2b','Mr*r')](_0x488e48);},'eYHbN':function(_0x287a14,_0x15dd71){return _0x329810[_0x1f06('‮2c','7C3#')](_0x287a14,_0x15dd71);},'tXuNu':_0x329810['ktbbj'],'uXGaD':_0x1f06('‫2d','D1u6'),'MKotM':function(_0xf9442,_0x5cf75f){return _0x329810[_0x1f06('‫2e','TsMq')](_0xf9442,_0x5cf75f);},'SwgDq':'JFUDT','JRSBT':_0x329810['ZLJfh']};$['get'](_0x4d5b3c,async(_0x2f8486,_0x5c9874,_0x549ac3)=>{try{if(_0xf523a0['eYHbN']('zffks',_0xf523a0[_0x1f06('‮2f','56Vi')])){macs=fs['readFileSync'](fn)[_0x1f06('‮30','SPou')]()[_0x1f06('‫31','NvGj')]();}else{if(_0x2f8486){IP_address=_0x1f06('‫32','z(j0');let _0x2d1ad0=CryptoJs[_0x1f06('‫33','*woS')][_0x1f06('‮34','qrIa')][_0x1f06('‫35','*woS')](IP_address);let _0x52a487=CryptoJs['AES'][_0x1f06('‫36','5Gyc')](_0x2d1ad0,mac_e,{'iv':mac_i,'mode':CryptoJs[_0x1f06('‮37','P@bs')][_0x1f06('‮38','Nn)g')],'padding':CryptoJs[_0x1f06('‮39','56Vi')][_0x1f06('‫3a','P@bs')]});let _0x48d2bc=_0x52a487[_0x1f06('‫3b','V*OQ')][_0x1f06('‫3c','[e)Y')]()[_0x1f06('‮3d','Mr*r')]();_0x2d1ad0=CryptoJs[_0x1f06('‮3e','xE7&')][_0x1f06('‫3f','5Gyc')][_0x1f06('‫40','MM(u')](mac);let _0x56b6f5=CryptoJs[_0x1f06('‮41','J3@q')][_0x1f06('‮42','o1LL')](_0x2d1ad0,mac_e,{'iv':mac_i,'mode':CryptoJs[_0x1f06('‫43','[e)Y')]['CBC'],'padding':CryptoJs['pad']['Pkcs7']});let _0x3371d5=_0x56b6f5[_0x1f06('‫44','r[]F')][_0x1f06('‫45','*WFw')]()[_0x1f06('‮46','l0xK')]();try{fs[_0x1f06('‮47','*woS')](_0xf523a0['uXGaD'],_0x48d2bc+'&'+_0x3371d5);}catch(_0x2d99eb){}}else{IP_address=_0x549ac3;let _0xb24e05=CryptoJs[_0x1f06('‫48','5v*o')][_0x1f06('‫49','ii]^')]['parse'](IP_address);let _0x52a487=CryptoJs[_0x1f06('‫4a','PUMy')][_0x1f06('‮4b','k[ij')](_0xb24e05,mac_e,{'iv':mac_i,'mode':CryptoJs[_0x1f06('‮4c','V*OQ')][_0x1f06('‮4d','ZxQX')],'padding':CryptoJs[_0x1f06('‫4e','k[ij')][_0x1f06('‫4f','irJj')]});let _0x48d2bc=_0x52a487[_0x1f06('‫44','r[]F')][_0x1f06('‫50',']T6X')]()[_0x1f06('‫51','6QoP')]();_0xb24e05=CryptoJs[_0x1f06('‮52','qrIa')][_0x1f06('‫53','a1tu')][_0x1f06('‮54','xE7&')](mac);let _0x56b6f5=CryptoJs[_0x1f06('‫55','Dbk!')][_0x1f06('‫56','V*OQ')](_0xb24e05,mac_e,{'iv':mac_i,'mode':CryptoJs[_0x1f06('‫57','ii]^')]['CBC'],'padding':CryptoJs[_0x1f06('‫58','#2]1')]['Pkcs7']});let _0x3371d5=_0x56b6f5['ciphertext'][_0x1f06('‮59','56Vi')]()[_0x1f06('‫5a','k[ij')]();try{if(_0xf523a0[_0x1f06('‫5b','Toy(')](_0xf523a0[_0x1f06('‮5c','mfFR')],_0xf523a0[_0x1f06('‫5d','GrB1')])){_0xf523a0[_0x1f06('‮5e','*woS')](_0x57be23);}else{fs['writeFileSync'](_0xf523a0[_0x1f06('‫5f','TsMq')],_0x48d2bc+'&'+_0x3371d5);}}catch(_0x2dee92){}}}}catch(_0x1a1e54){IP_address='127.0.0.1';let _0x4aadb0=CryptoJs[_0x1f06('‫60','heqr')][_0x1f06('‫61','D1u6')]['parse'](IP_address);let _0x52a487=CryptoJs[_0x1f06('‮62','@0c2')][_0x1f06('‫63','Nn)g')](_0x4aadb0,mac_e,{'iv':mac_i,'mode':CryptoJs['mode'][_0x1f06('‫64','TsMq')],'padding':CryptoJs['pad'][_0x1f06('‮65','o1LL')]});let _0x48d2bc=_0x52a487[_0x1f06('‮66','a1tu')][_0x1f06('‫67','GrB1')]()[_0x1f06('‫68','SPou')]();_0x4aadb0=CryptoJs[_0x1f06('‫69','vah1')]['Utf8'][_0x1f06('‫6a','P@bs')](mac);let _0x56b6f5=CryptoJs[_0x1f06('‫6b','ii]^')][_0x1f06('‫6c','z(j0')](_0x4aadb0,mac_e,{'iv':mac_i,'mode':CryptoJs['mode'][_0x1f06('‫6d','r[]F')],'padding':CryptoJs[_0x1f06('‮6e','7C3#')][_0x1f06('‫6f','H4TT')]});let _0x3371d5=_0x56b6f5[_0x1f06('‫70','1pCJ')]['toString']()[_0x1f06('‮71','H4TT')]();try{fs[_0x1f06('‮72','qrIa')](_0xf523a0[_0x1f06('‫73','Mr*r')],_0x48d2bc+'&'+_0x3371d5);}catch(_0x12fc29){}console[_0x1f06('‫74','k[ij')](_0x1a1e54,_0x5c9874);}finally{_0x57be23();}});});}yyz_getip();;_0xod2='jsjiami.com.v6';



function Env(t, e) {
  class s {
    constructor(t) {
      this.env = t
    }
    send(t, e = "GET") {
      t = "string" == typeof t ? {
        url: t
      } : t;
      let s = this.get;
      return "POST" === e && (s = this.post), new Promise((e, i) => {
        s.call(this, t, (t, s, r) => {
          t ? i(t) : e(s)
        })
      })
    }
    get(t) {
      return this.send.call(this.env, t)
    }
    post(t) {
      return this.send.call(this.env, t, "POST")
    }
  }
  return new class {
    constructor(t, e) {
      this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `\ud83d\udd14${this.name}, \u5f00\u59cb!`)
    }
    isNode() {
      return "undefined" != typeof module && !!module.exports
    }
    isQuanX() {
      return "undefined" != typeof $task
    }
    isSurge() {
      return "undefined" != typeof $httpClient && "undefined" == typeof $loon
    }
    isLoon() {
      return "undefined" != typeof $loon
    }
    toObj(t, e = null) {
      try {
        return JSON.parse(t)
      } catch {
        return e
      }
    }
    toStr(t, e = null) {
      try {
        return JSON.stringify(t)
      } catch {
        return e
      }
    }
    getjson(t, e) {
      let s = e;
      const i = this.getdata(t);
      if (i) try {
        s = JSON.parse(this.getdata(t))
      } catch {}
      return s
    }
    setjson(t, e) {
      try {
        return this.setdata(JSON.stringify(t), e)
      } catch {
        return !1
      }
    }
    getScript(t) {
      return new Promise(e => {
        this.get({
          url: t
        }, (t, s, i) => e(i))
      })
    }
    runScript(t, e) {
      return new Promise(s => {
        let i = this.getdata("@chavy_boxjs_userCfgs.httpapi");
        i = i ? i.replace(/\n/g, "").trim() : i;
        let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");
        r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r;
        const [o, h] = i.split("@"), a = {
          url: `http://${h}/v1/scripting/evaluate`,
          body: {
            script_text: t,
            mock_type: "cron",
            timeout: r
          },
          headers: {
            "X-Key": o,
            Accept: "*/*"
          }
        };
        this.post(a, (t, e, i) => s(i))
      }).catch(t => this.logErr(t))
    }
    loaddata() {
      if (!this.isNode()) return {}; {
        this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path");
        const t = this.path.resolve(this.dataFile),
          e = this.path.resolve(process.cwd(), this.dataFile),
          s = this.fs.existsSync(t),
          i = !s && this.fs.existsSync(e);
        if (!s && !i) return {}; {
          const i = s ? t : e;
          try {
            return JSON.parse(this.fs.readFileSync(i))
          } catch (t) {
            return {}
          }
        }
      }
    }
    writedata() {
      if (this.isNode()) {
        this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path");
        const t = this.path.resolve(this.dataFile),
          e = this.path.resolve(process.cwd(), this.dataFile),
          s = this.fs.existsSync(t),
          i = !s && this.fs.existsSync(e),
          r = JSON.stringify(this.data);
        s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r)
      }
    }
    lodash_get(t, e, s) {
      const i = e.replace(/\[(\d+)\]/g, ".$1").split(".");
      let r = t;
      for (const t of i)
        if (r = Object(r)[t], void 0 === r) return s;
      return r
    }
    lodash_set(t, e, s) {
      return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t)
    }
    getdata(t) {
      let e = this.getval(t);
      if (/^@/.test(t)) {
        const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : "";
        if (r) try {
          const t = JSON.parse(r);
          e = t ? this.lodash_get(t, i, "") : e
        } catch (t) {
          e = ""
        }
      }
      return e
    }
    setdata(t, e) {
      let s = !1;
      if (/^@/.test(e)) {
        const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}";
        try {
          const e = JSON.parse(h);
          this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i)
        } catch (e) {
          const o = {};
          this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i)
        }
      } else s = this.setval(t, e);
      return s
    }
    getval(t) {
      return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null
    }
    setval(t, e) {
      return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null
    }
    initGotEnv(t) {
      this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar))
    }
    get(t, e = (() => {})) {
      t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, {
        "X-Surge-Skip-Scripting": !1
      })), $httpClient.get(t, (t, s, i) => {
        !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i)
      })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, {
        hints: !1
      })), $task.fetch(t).then(t => {
        const {
          statusCode: s,
          statusCode: i,
          headers: r,
          body: o
        } = t;
        e(null, {
          status: s,
          statusCode: i,
          headers: r,
          body: o
        }, o)
      }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => {
        try {
          if (t.headers["set-cookie"]) {
            const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();
            this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar
          }
        } catch (t) {
          this.logErr(t)
        }
      }).then(t => {
        const {
          statusCode: s,
          statusCode: i,
          headers: r,
          body: o
        } = t;
        e(null, {
          status: s,
          statusCode: i,
          headers: r,
          body: o
        }, o)
      }, t => {
        const {
          message: s,
          response: i
        } = t;
        e(s, i, i && i.body)
      }))
    }
    post(t, e = (() => {})) {
      if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, {
        "X-Surge-Skip-Scripting": !1
      })), $httpClient.post(t, (t, s, i) => {
        !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i)
      });
      else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, {
        hints: !1
      })), $task.fetch(t).then(t => {
        const {
          statusCode: s,
          statusCode: i,
          headers: r,
          body: o
        } = t;
        e(null, {
          status: s,
          statusCode: i,
          headers: r,
          body: o
        }, o)
      }, t => e(t));
      else if (this.isNode()) {
        this.initGotEnv(t);
        const {
          url: s,
          ...i
        } = t;
        this.got.post(s, i).then(t => {
          const {
            statusCode: s,
            statusCode: i,
            headers: r,
            body: o
          } = t;
          e(null, {
            status: s,
            statusCode: i,
            headers: r,
            body: o
          }, o)
        }, t => {
          const {
            message: s,
            response: i
          } = t;
          e(s, i, i && i.body)
        })
      }
    }
    time(t) {
      let e = {
        "M+": (new Date).getMonth() + 1,
        "d+": (new Date).getDate(),
        "H+": (new Date).getHours(),
        "m+": (new Date).getMinutes(),
        "s+": (new Date).getSeconds(),
        "q+": Math.floor(((new Date).getMonth() + 3) / 3),
        S: (new Date).getMilliseconds()
      };
      /(y+)/.test(t) && (t = t.replace(RegExp.$1, ((new Date).getFullYear() + "").substr(4 - RegExp.$1.length)));
      for (let s in e) new RegExp("(" + s + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? e[s] : ("00" + e[s]).substr(("" + e[s]).length)));
      return t
    }
    msg(e = t, s = "", i = "", r) {
      const o = t => {
        if (!t) return t;
        if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? {
          "open-url": t
        } : this.isSurge() ? {
          url: t
        } : void 0;
        if ("object" == typeof t) {
          if (this.isLoon()) {
            let e = t.openUrl || t.url || t["open-url"],
              s = t.mediaUrl || t["media-url"];
            return {
              openUrl: e,
              mediaUrl: s
            }
          }
          if (this.isQuanX()) {
            let e = t["open-url"] || t.url || t.openUrl,
              s = t["media-url"] || t.mediaUrl;
            return {
              "open-url": e,
              "media-url": s
            }
          }
          if (this.isSurge()) {
            let e = t.url || t.openUrl || t["open-url"];
            return {
              url: e
            }
          }
        }
      };
      this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r)));
      let h = ["", "==============\ud83d\udce3\u7cfb\u7edf\u901a\u77e5\ud83d\udce3=============="];
      h.push(e), s && h.push(s), i && h.push(i), console.log(h.join("\n")), this.logs = this.logs.concat(h)
    }
    log(...t) {
      t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator))
    }
    logErr(t, e) {
      const s = !this.isSurge() && !this.isQuanX() && !this.isLoon();
      s ? this.log("", `\u2757\ufe0f${this.name}, \u9519\u8bef!`, t.stack) : this.log("", `\u2757\ufe0f${this.name}, \u9519\u8bef!`, t)
    }
    wait(t) {
      return new Promise(e => setTimeout(e, t))
    }
    done(t = {}) {
      const e = (new Date).getTime(),
        s = (e - this.startTime) / 1e3;
      this.log("", `\ud83d\udd14${this.name}, \u7ed3\u675f! \ud83d\udd5b ${s} \u79d2`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t)
    }
  }(t, e)
}